schema: '2.0'
stages:
  model_training:
    cmd: python src/model_training.py
    deps:
    - path: data/processed_cookbook.pkl
      hash: md5
      md5: fe2fe3917845db42c583c1adcba65aef
      size: 3095875
    - path: src/model_training.py
      hash: md5
      md5: 321ef58f60c20ed8be180ba38fc14fa5
      size: 5385
    params:
      params.yaml:
        model_pipeline.fast_text:
          vector_size: 100
          window: 8
          sg: 0
          epochs: 100
        model_pipeline.model_scoring:
          w_title: 0.1
          w_cosine: 0.2
          w_maxsim: 0.7
    outs:
    - path: models/fasttext.model
      hash: md5
      md5: 99d095155db6b012f9fd2706fe9a5d88
      size: 977600
    - path: models/fasttext.model.wv.vectors_ngrams.npy
      hash: md5
      md5: 038c9b5b9ecc977e1894c6e2cbd1bf6e
      size: 800000128
    - path: training_metadata.json
      hash: md5
      md5: 4fe258e40e1ae39df1b8e4b0a024c47b
      size: 740
  model_evaluation:
    cmd: python src/model_evaluation.py
    deps:
    - path: src/model_evaluation.py
      hash: md5
      md5: 3201934698533a83505292a9a7a30b58
      size: 4741
    - path: training_metadata.json
      hash: md5
      md5: 4fe258e40e1ae39df1b8e4b0a024c47b
      size: 740
    params:
      params.yaml:
        model_evaluation:
          seed: 42
          k: 10
          relevant_thresh: 0.5
    outs:
    - path: validation_metadata.json
      hash: md5
      md5: 2429610b7f0aa6877963b11b2efb887d
      size: 1128
  model_registering:
    cmd: python src/model_registering.py
    deps:
    - path: registered_metadata.json
      hash: md5
      md5: 2429610b7f0aa6877963b11b2efb887d
      size: 1128
    - path: src/model_registering.py
      hash: md5
      md5: 86b19d6c2200c88f27ab1e3b15491b46
      size: 3553
    - path: validation_metadata.json
      hash: md5
      md5: 2429610b7f0aa6877963b11b2efb887d
      size: 1128
    params:
      params.yaml:
        model_register:
          max_runs: 3
  data_preprocessing:
    cmd: python src/data_preprocessing.py
    deps:
    - path: data/complete_cookbook.pkl
      hash: md5
      md5: 5131f6a43f3a4aa6c03c2a7d1b004359
      size: 14541929
    - path: src/data_preprocessing.py
      hash: md5
      md5: 3f0b1e41fe6bbcbf9dee9318d4971a7a
      size: 8488
    outs:
    - path: data/processed_cookbook.pkl
      hash: md5
      md5: fe2fe3917845db42c583c1adcba65aef
      size: 3095875
